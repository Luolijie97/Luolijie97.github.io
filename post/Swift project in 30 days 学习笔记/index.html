<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Swift project in 30 days 学习笔记 | llj的blog</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://luolijie97.github.io//favicon.ico?v=1579409137635">
<link rel="stylesheet" href="https://luolijie97.github.io//styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="day1: CustomFont


SnapKit 第三方autolayout自动布局库
let changeBtn = UIButton(type: .custom)
changeBtn.snp.makeConstraints { (m..." />
    <meta name="keywords" content="Swift学习" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://luolijie97.github.io/">
        <img src="https://luolijie97.github.io//images/avatar.png?v=1579409137635" class="site-logo">
        <h1 class="site-title">llj的blog</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      llj's blog
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://luolijie97.github.io//atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Swift project in 30 days 学习笔记</h2>
            <div class="post-date">2020-01-16</div>
            
            <div class="post-content" v-pre>
              <h2 id="day1-customfont">day1: CustomFont</h2>
<ul>
<li>
<p><strong><em>SnapKit</em></strong> 第三方autolayout自动布局库</p>
<pre><code class="language-swift">let changeBtn = UIButton(type: .custom)
changeBtn.snp.makeConstraints { (make) in
//            make.top.equalTo(500)
    make.top.equalTo(label.snp.bottom).offset(300)
    make.centerX.equalTo(self.view)
    make.width.equalTo(200)
  }
</code></pre>
</li>
<li>
<p>UIFont.familyNames</p>
</li>
<li>
<p>UIfont.fontNames</p>
<pre><code class="language-swift">let familyNames = UIFont.familyNames
for familyName in familyNames {
  print(&quot;+++++ \(familyName)&quot;)
  let fontNames = UIFont.fontNames(forFamilyName: familyName)
  for fontName in fontNames {
    print(&quot;---- \(fontName)&quot;)
  }
}
</code></pre>
</li>
</ul>
<h2 id="day2-watchs-demo">day2: Watch's Demo</h2>
<ul>
<li>
<p>SnapKit</p>
<pre><code class="language-swift">let resetButton = UIButton()
resetButton.snp.makeConstraints { (make) in
   make.top.equalTo(10)
   make.right.equalTo(-10)
   make.width.equalTo(100)
   make.height.equalTo(50)
}
</code></pre>
</li>
<li>
<p>Timer使用</p>
</li>
<li>
<pre><code class="language-swift">var timer: Timer!
  @objc func startHander() {
      if self.timer != nil {
          self.stopHander()
      }
      self.timer = Timer.scheduledTimer(withTimeInterval: 0.1, repeats: true, block: { (Timer) in
          self.labelNumber += 0.1
          self.result.text = String(format: &quot;%.1f&quot;, self.labelNumber)
      })
      self.timer.fire()
      
  }

  @objc func stopHander() {
      guard let timerForDistory = self.timer else { return }
      timerForDistory.invalidate()
  }
  
  @objc func resetHander() {
      self.labelNumber = 0
      self.result.text = &quot;0&quot;
  }
</code></pre>
</li>
<li></li>
</ul>
<h2 id="day3-find-my-position">day3: Find My Position</h2>
<ul>
<li>
<p>毛玻璃效果</p>
<ul>
<li>UIBlurEffect</li>
<li>UIVibrancyEffect：放大和调整 UIVisualEffectView 视图下面的内容的颜色
<ul>
<li><code>//创建并添加vibrancy视图 let vibrancyEffect = UIVibrancyEffect(blurEffect: blurEffect)</code></li>
</ul>
</li>
<li>UIVisualEffectView：模糊视图
<ul>
<li>//创建一个承载模糊效果的视图<br>
let blurView = UIVisualEffectView(effect: blurEffect)</li>
</ul>
</li>
</ul>
<pre><code class="language-swift">        let blurEffect = UIBlurEffect(style: .light)
        let blurView = UIVisualEffectView(effect: blurEffect)
        blurView.frame = self.view.bounds
        self.view.addSubview(blurView)
</code></pre>
</li>
<li>
<p>获取定位：CLLocationManger,CLLocationManagerDelegate</p>
<ul>
<li>
<pre><code class="language-swift">let locationManger = CLLocationManager()
let geocoder = CLGeocoder()

locationManger.delegate = self

let findMyLocationBtn = UIButton(type: .custom)
findMyLocationBtn.addTarget(self, action: #selector(findMyLocation), for: .touchUpInside)
self.view.addSubview(findMyLocationBtn)

//start find location
@objc func findMyLocation() {
  locationManger.requestAlwaysAuthorization()
  locationManger.startUpdatingLocation()
}
//CLLocationManagerDelegate
//Tells the delegate that new location data is available.
func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) {
  let locations: NSArray = locations as NSArray
  let currentLocation = locations.lastObject as! CLLocation
  let locationStr = &quot;lat:\(currentLocation.coordinate.latitude) lng:\(currentLocation.coordinate.longitude)&quot;

  locationLabel.text = locationStr
  reverseGeocode(location: currentLocation)
  locationManger.stopUpdatingLocation()
}
//将经纬度转换为城市名
func reverseGeocode(location: CLLocation) {
  geocoder.reverseGeocodeLocation(location) { (palceMark, error) in
     if (error == nil) {
         let tempArray = palceMark! as NSArray
         let mark = tempArray.firstObject as! CLPlacemark
         //now begins the reverse geocode
         let country = mark.country!
         let city = mark.locality!
         let street = mark.thoroughfare!

         let finalAddress = &quot;\(street),\(city),\(country)&quot;
         self.locationStrLabel.text = finalAddress

     }
  }
}
</code></pre>
</li>
<li></li>
</ul>
</li>
<li>
<p>缩略图: image literal, color literal</p>
</li>
</ul>
<h2 id="day4-limit-input-text-field">day4: Limit input Text Field</h2>
<ul>
<li>
<p>UINavigationController和UINavigationItem的使用</p>
<pre><code class="language-swift">let leftItem = UIBarButtonItem(title: &quot;close&quot;, style: .plain, target: self, action: nil)
self.navigationItem.leftBarButtonItem = leftItem
let rightItem = UIBarButtonItem(title: &quot;Tweet&quot;, style: .plain, target: self, action: nil)
rightItem.tintColor = .green
self.navigationItem.rightBarButtonItem = rightItem
self.window?.rootViewController = UINavigationController(rootViewController: ViewController())
</code></pre>
<ul>
<li><strong><code>ios13默认无UINavigationController</code></strong></li>
</ul>
</li>
<li>
<p>UITextViewDelegate使用</p>
<ul>
<li>通过UITextView的textViewDidChange委托事件捕捉当前输入内容</li>
<li>extViewDidBeginEditing 开始</li>
<li>textViewDidEndEditing 结束</li>
</ul>
</li>
<li>
<p><strong><code>通过监听UIResponder.keyboardWillChangeFrameNotification事件来监视Keyboard的弹出和收起</code></strong></p>
<ul>
<li>
<p><strong>Notification中的userinfo有键盘相关信息</strong></p>
</li>
<li>
<pre><code class="language-swift">//userinfo中包含keyboard相关信息
//获得键盘动画时长: note.userInfo?[UIResponder.keyboardAnimationDurationUserInfoKey] 
let duration = note.userInfo?[UIResponder.keyboardAnimationDurationUserInfoKey] as! TimeInterval
//获得键盘的endFrame: note.userInfo?[UIResponder.keyboardFrameEndUserInfoKey] 
let endFrame = (note.userInfo?[UIResponder.keyboardFrameEndUserInfoKey] as! NSValue).cgRectValue
</code></pre>
</li>
</ul>
</li>
<li>
<p>ios动画实现之UIView</p>
<ul>
<li>UIView.animate(withDuration:) {}</li>
</ul>
</li>
</ul>
<h2 id="day5-pull-to-refresh">day5: Pull To Refresh</h2>
<ul>
<li>
<p><strong>UIRefreshControl</strong> 下拉刷新控件使用</p>
<pre><code class="language-swift">let refresh = UIRefreshControll()
refresh.attributedTitle = .init(string:&quot;Pulling&quot;)
refresh.addTarget(self, action: #selector(pullTheRefresh), for: .valueChanged)

@objc func pullTheRefresh() {
  //...
  refresh.endRefreshing()
  //...
}
</code></pre>
</li>
<li>
<p>下拉触发事件： <code>UIControl.Event.valueChanged</code></p>
</li>
<li>
<p>UITableView组件的使用</p>
<ul>
<li><strong><code>delegate &amp; datasource</code></strong></li>
<li>separateor 分割线</li>
</ul>
<pre><code class="language-swift">var table: UITableView!
table = UITableView(frame: self.view.bounds)
table.frame.origin.y = 44
table.separatorStyle = .singleLine
table.separatorColor = .black
self.view.addSubview(table)

table.delegate = self
table.dataSource = self
</code></pre>
</li>
<li>
<p><code>DateFormatter</code>日期转换</p>
<ul>
<li>.dataFormat 转换格式</li>
</ul>
<pre><code class="language-swift">let dateFormatter = DateFormatter()
dateFormatter.dateFormat = &quot;yyyy年MM月dd日/HH时mm分ss秒&quot;
let dateStr = dateFormatter.string(from: dataSource[indexPath.row])
</code></pre>
</li>
</ul>
<h2 id="day6-video-player">day6: Video Player</h2>
<ol>
<li>AVAudioPlayer 音频播放器实体
<ul>
<li>AVAudioSession.shareInstance() 音频相关设置</li>
</ul>
</li>
</ol>
<blockquote>
<pre><code class="language-swift">let audioPath = Bundle.main.path(forResource: &quot;live.mp3&quot;, ofType: nil)
let audioUrl = URL(fileURLWithPath: audioPath!)
//音频初始化
do {
audioPlayer = try AVAudioPlayer(contentsOf: audioUrl)
print(&quot;audioplayer is not nil&quot;)
} catch {
audioPlayer = nil

print(&quot;error:\(error)&quot;)
}
do {
//激活音频会话
try AVAudioSession.sharedInstance().setCategory(.playback)
try AVAudioSession.sharedInstance().setActive(true)
} catch {
print(&quot;error:\(error)&quot;)
}
</code></pre>
</blockquote>
<ol start="2">
<li>
<p>AVAudioPlayerDelegate 音频播放相关委托</p>
</li>
<li>
<p>后台播放相关设置（plist, code）</p>
</li>
</ol>
<blockquote>
<p><img src="https://raw.githubusercontent.com/Luolijie97/Pic_PicGo/master/img/image-20191110142700690.png" alt="" loading="lazy"><br>
<img src="https://raw.githubusercontent.com/Luolijie97/Pic_PicGo/master/img/image-20191110142743216.png" alt="" loading="lazy"></p>
</blockquote>
<ol>
<li>锁屏相关设置
<ul>
<li>MPNowPlayingInfoCenter.default().nowPlayingInfo 锁屏信息</li>
<li>remoteControlReceived 代理方法实现</li>
</ul>
</li>
</ol>
<blockquote>
<pre><code class="language-swift">func initForLockScreen() {

let artWorkImage:UIImage = UIImage(named: &quot;thumb.jpg&quot;)!

MPNowPlayingInfoCenter.default().nowPlayingInfo = [
 MPMediaItemPropertyTitle:&quot;皇后大道东&quot;,
 MPMediaItemPropertyArtist:&quot;罗大佑&quot;,
 MPMediaItemPropertyArtwork:MPMediaItemArtwork(boundsSize: artWorkImage.size, requestHandler: { (size) -&gt; UIImage in
                                                                                               return artWorkImage
                                                                                              }),
 MPNowPlayingInfoPropertyPlaybackRate:1.0,
 MPMediaItemPropertyPlaybackDuration:audioPlayer?.duration ?? 0,
 MPNowPlayingInfoPropertyElapsedPlaybackTime:audioPlayer?.currentTime ?? 0
]

if (audioPlayer?.isPlaying != nil) {
 MPNowPlayingInfoCenter.default().playbackState = .playing
} else {
 MPNowPlayingInfoCenter.default().playbackState = .paused
}

}

override func remoteControlReceived(with event: UIEvent?) {
switch event!.subtype {
 case .remoteControlPlay:
 audioPlayer?.play()
 case .remoteControlPause:
 audioPlayer?.pause()
 case .remoteControlStop:
 audioPlayer?.stop()
 default:
 break
}
}
</code></pre>
</blockquote>
<h2 id="day7-simple-photo-browser">day7: Simple Photo Browser</h2>
<ul>
<li>
<p>UIScrollView使用</p>
<ul>
<li>
<p>使用缩放：设置**<code>maximumZoomScale</code><strong>和</strong><code>minimumZoomScale</code><strong>,实现委托方法</strong><code>ViewForZooming</code>**</p>
<blockquote>
<pre><code class="language-swift">var scrollView:UIScrollView!
scrollView = UIScrollView(frame: self.view.frame)
scrollView.maximumZoomScale = 6.0
scrollView.minimumZoomScale = 1.0
scrollView.backgroundColor = .black
scrollView.contentSize = imageView.bounds.size
scrollView.delegate = self
self.view.addSubview(scrollView)

//MARK: - UIScrollViewDelegate
func viewForZooming(in scrollView: UIScrollView) -&gt; UIView? {
return imageView
}
</code></pre>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="day8-color-gradient">day8: Color Gradient</h2>
<ul>
<li>
<p>CAGradientLayer 渐变层的使用</p>
<ul>
<li><strong>frame</strong>,<strong>colors</strong>...</li>
<li><strong><code>self.view.layer.addsublayer()</code></strong></li>
<li>colors 可用**[CGColor]**数组进行赋值</li>
</ul>
<blockquote>
<pre><code class="language-swift">var grandientLayer:CAGradientLayer!
var colorSets = [[CGColor]]()
var currentColorSet:Int!
func createGradientLayer() {
grandientLayer = CAGradientLayer()
grandientLayer.frame = self.view.bounds
//set gradient color
grandientLayer.colors = colorSets[currentColorSet]
//将grandientLayer作为子layer加到主layer上
self.view.layer.addSublayer(grandientLayer)
}
</code></pre>
</blockquote>
</li>
<li>
<p>Gesture操作之<strong>PanGestureRecognizer</strong>：“滑动”手势，可以识别拖拽或移动动作</p>
<ul>
<li>
<p>初始化UIPanGestureRecognizer</p>
<pre><code class="language-swift">let panGestureRecognizer = UIPanGestureRecognizer(target: self, action: #selector(handlePanGesture(sender:)))
</code></pre>
</li>
<li>
<p>将手势添加到视图上</p>
<pre><code class="language-swift">self.view.addGestureRecogizer(panGestureRecognizer)
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="day9-swipeable-cell">day9: Swipeable Cell</h2>
<ul>
<li>
<p>UItableView使用</p>
<ul>
<li>
<p>**<code>UIContextualAction</code>**的闭包用法</p>
<p><strong>https://www.jianshu.com/p/847deff29f24</strong></p>
<p><strong>https://www.jianshu.com/p/14d778afeefc</strong></p>
</li>
</ul>
<pre><code class="language-swift">//MARK: - UITableViewDataSource
func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int
{
  //返回每个section中的行数
}
//Asks the data source for a cell to insert in a particular location of the table view.
func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {
  // cell的初始化与复用，返回cell
}

//MARK: - UITableViewDelegate
//从尾部开始向左滑动cell
func tableView(_ tableView: UITableView, trailingSwipeActionsConfigurationForRowAt indexPath: IndexPath) -&gt; UISwipeActionsConfiguration? {
  //Returns the swipe actions to display on the trailing edge of the row.
  let likeAction = UIContextualAction(style: .normal, title: &quot;👍&quot;) { (action, view, finished) in
            self.actionController.message = &quot;Thanks for your Love 😸&quot;
            self.showAlertController()
            finished(true)
        }
        likeAction.backgroundColor = .white
        
        let disLikeAction = UIContextualAction(style: .normal, title: &quot;👎&quot;) { (action, view, finished) in
            self.actionController.message = &quot;Tell me Why!!!😤&quot;
            self.showAlertController()
            finished(true)
        }
        disLikeAction.backgroundColor = .white
        
        let unknowAction = UIContextualAction(style: .destructive, title: &quot;🖖&quot;) { (action, view, finished) in
            self.actionController.message = &quot;What do you mean? 🤔&quot;
            self.showAlertController()
            finished(true)
        }
        unknowAction.backgroundColor = .white
        //action从右向左的顺序添加
        return .init(actions: [likeAction, disLikeAction , unknowAction])
}
</code></pre>
</li>
<li>
<p>**<code>UIAlertController</code>**的使用</p>
<pre><code class="language-swift">private var actionController: UIAlertController!
//init alertController
actionController = UIAlertController(title: &quot;alert&quot;, message: &quot;&quot;, preferredStyle: .alert)
//...
self.actionController.message = &quot;123&quot;
present(actionController, animated: true) {
  let dismissTimer = Timer.sheduledTimer(withTimeInterval: 2.0, repeats: false) {
    (timer) in 
    	self.actionController.dismiss(animate: true, completion: nil)
  }
  RunLoop.main.add(dismissTimer, forMode: .comoon)
}

</code></pre>
</li>
<li>
<p><strong><code>UIView动画使用</code></strong></p>
<pre><code class="language-swift">//cell的显示动画
let cells = tableView.visibleCells
let tableHeight:CGFloat = tableView.bounds.size.height
for (index, cell) in cells.enumerated() {
  cell.frame.origin.y = tableHeight
  UIView.animate(withDuration: 1.0, delay: 0.04 * Double(index), usingSpringWithDamping: 0.8, initialSpringVelocity: 0, options: [], animations: {
    cell.frame.origin.y = 0
  }, completion: nil)
}
</code></pre>
</li>
</ul>
<h2 id="day10-stretchy-header">day10 Stretchy Header</h2>
<ul>
<li>
<p>UIScrollViewDelegate使用</p>
<pre><code class="language-swift">//MARK: - UIScrollViewDelegate
func scrollViewDidScroll(_ scrollView: UIScrollView) {
  let offsetY = scrollView.contentOffset.y
  let maxOffsetY = tableView.frame.height
  let validateOffsetY = -offsetY / maxOffsetY
  let scaleFactor = 1 + validateOffsetY
  bannerImgView.transform = CGAffineTransform(scaleX: scaleFactor, y: scaleFactor)

}
</code></pre>
</li>
</ul>
<h2 id="day11-gradienttableview">day11 GradientTableView</h2>
<ul>
<li>
<p>UITableView的渐变层</p>
<pre><code class="language-swift">func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {
  let cell = UITableViewCell(style: .default, reuseIdentifier: &quot;reuseId&quot;)
  cell.textLabel?.text = self.dataSource[indexPath.row]
  cell.textLabel?.textColor = .white
  cell.selectionStyle = .none

  //cell -&gt; bgView -&gt; gradientLayer, move bgView back to the cell
  let bgview = UIView(frame: CGRect(x: 0, y: 0, width: self.view.frame.width, height: self.cellHeight))
  let gradientLayer = CAGradientLayer()
  gradientLayer.frame = bgview.frame

  let lowerColor:CGColor = UIColor(red: 1.0, green: (CGFloat(indexPath.row * 2) * self.colorRatio)/255.0, blue: (CGFloat(indexPath.row * 2) * self.colorRatio)/255.0, alpha: 1).cgColor
  let upperColor:CGColor = UIColor(red: 1.0, green: (CGFloat(indexPath.row * 2) * self.colorRatio + self.colorRatio)/255.0, blue: (CGFloat(indexPath.row * 2) * self.colorRatio + self.colorRatio)/255.0, alpha: 1).cgColor

  gradientLayer.colors = [lowerColor, upperColor]
  bgview.layer.addSublayer(gradientLayer)
  cell.insertSubview(bgview, belowSubview: cell.contentView)

  /* equal to below
  cell.addSubview(bgview)
  cell.sendSubviewToBack(bgview)
  */

  return cell
}
</code></pre>
</li>
</ul>
<h2 id="day12-emoji-slot-machine">day12 Emoji Slot Machine</h2>
<ul>
<li>
<p><strong>UIPickerView</strong>的使用</p>
<ul>
<li>初始化</li>
</ul>
<blockquote>
<pre><code class="language-swift">slotMachine = UIPickerView(frame: CGRect(x: 0, y: 0, width: self.view.frame.width, height: 220))
self.view.addSubview(slotMachine)
slotMachine.dataSource = self
slotMachine.delegate = self
slotMachine.center.x = self.view.center.x
slotMachine.center.y = self.view.center.y - 50

slotMachine.selectRow(Int(arc4random())%(emojiArray.count), inComponent: 0, animated: false)
slotMachine.selectRow(Int(arc4random())%(emojiArray.count), inComponent: 1, animated: false)
slotMachine.selectRow(Int(arc4random())%(emojiArray.count), inComponent: 2, animated: false)
</code></pre>
</blockquote>
<ul>
<li>
<p><strong>UIPickerViewDataSource</strong>相关</p>
<blockquote>
<pre><code class="language-swift">func numberOfComponents(in pickerView: UIPickerView) -&gt; Int {
return 3
}

func pickerView(_ pickerView: UIPickerView, numberOfRowsInComponent component: Int) -&gt; Int {
return emojiArray.count
}
</code></pre>
</blockquote>
</li>
<li>
<p><strong>UIPickerViewDelegate</strong>相关</p>
<blockquote>
<pre><code class="language-swift">func pickerView(_ pickerView: UIPickerView, rowHeightForComponent component: Int) -&gt; CGFloat {
return 90
}

func pickerView(_ pickerView: UIPickerView, viewForRow row: Int, forComponent component: Int, reusing view: UIView?) -&gt; UIView {
let pickerLabel = UILabel()
pickerLabel.text = emojiArray[row]
pickerLabel.textAlignment = .center
pickerLabel.font = .systemFont(ofSize: 60)
return pickerLabel
}
</code></pre>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="day13-loginanimation">day13 LoginAnimation</h2>
<ul>
<li>
<p>UINavigationController的使用</p>
<pre><code class="language-swift">//Pushes a view controller onto the receiver’s stack and updates the display.
let loginVC = LoginViewController()
self.navigationController?.pushViewController(loginVC, animated: false)

//Pops the top view controller from the navigation stack and updates the display.
self.navigationController?.popViewController(animated: true)
</code></pre>
</li>
<li>
<p>UIView.animate动画效果</p>
<pre><code class="language-swift">//初始状态
self.view.alpha = 0
let userNameInputField = UITextField(frame: CGRect(x: -270, y: 50, width: 270, height: 40))
let pswInputField = UITextField(frame: CGRect(x: -270, y: 100, width: 270, height: 40))
let loginButton = UIButton(frame: CGRect(x: -125, y: 160, width: 125, height: 40))
//动画效果
UIView.animate(withDuration: 0.5) {
  self.view.alpha = 1
}

UIView.animate(withDuration: 0.5, delay: 0.6, usingSpringWithDamping: 0.9, initialSpringVelocity: 2, options: .allowAnimatedContent, animations: {
  userNameInputField.center.x = self.view.center.x
}, completion: nil)

UIView.animate(withDuration: 0.5, delay: 0.8, usingSpringWithDamping: 0.9, initialSpringVelocity: 2, options: .allowAnimatedContent, animations: {
  pswInputField.center.x = self.view.center.x
}, completion: nil)

UIView.animate(withDuration: 0.5, delay: 1, options: .curveEaseIn,animations: {
  loginButton.center.x = self.view.center.x
}) { (isComplete) in
    // usingSpringWithDamping: 0-1, the less the more exaggerate
    // initialSpringVelocity: the bigger the faster init speed
    UIView.animate(withDuration: 1, delay: 0.5, usingSpringWithDamping: 0.1, initialSpringVelocity: 2, options:.allowAnimatedContent, animations: {
      loginButton.frame.size.width = 180
      loginButton.center.x = self.view.center.x
    }, completion: nil)
   }
</code></pre>
</li>
</ul>
<h2 id="day14-spotlight-search">day14 Spotlight Search</h2>
<ol>
<li>
<p>CSSearchableItemAttributeSet使用</p>
<pre><code class="language-swift">//Spotlight 搜索配置
let attributSet = CSSearchableItemAttributeSet(itemContentType: &quot;test&quot;)
attributSet.title = itemDic[&quot;name&quot;] as? String
attributSet.contentDescription = itemDic[&quot;description&quot;] as? String
let imageData = (itemDic[&quot;cover&quot;] as? UIImage)!.jpegData(compressionQuality: 0.7)
attributSet.thumbnailData = imageData

let searchItem = CSSearchableItem(uniqueIdentifier: &quot;\(indexPath.row)&quot;, domainIdentifier: &quot;nimomeng&quot;, attributeSet: attributSet)
let tempItems = [searchItem]
CSSearchableIndex.default().indexSearchableItems(tempItems) { (error) in
                                                            }

//AppDelegate.swift
public let notificationName = NSNotification.Name.init(&quot;receivedIdFromSpotlightSearch&quot;)

//？？测试不调用
//应用程序在收到与用户活动相关的数据时调用此方法。 例如，当用户使用“越区切换”从其他设备转移活动时。
func application(_ application: UIApplication, continue userActivity: NSUserActivity, restorationHandler: @escaping ([UIUserActivityRestoring]?) -&gt; Void) -&gt; Bool {

  if userActivity.activityType == CSSearchableItemActionType {
    if let identifier = userActivity.userInfo?[CSSearchableItemActivityIdentifier] as? String {
      NotificationCenter.default.post(name: notificationName, object: self, userInfo: [&quot;id&quot;: identifier])
    }
  }
  return true
}

//ViewController.swift 
 @objc func receivedNotification(sender: Notification) {
        let userInfo = sender.userInfo
        let index = Int(userInfo?[&quot;id&quot;] as! String)
        let itemDic = dataSource[index!]
        let detailVC = DetailViewController.init(with: itemDic)
        
        self.navigationController?.pushViewController(detailVC, animated: true)
    
    }
</code></pre>
</li>
</ol>
<h2 id="day15-today-widget">day15 Today Widget</h2>
<h3 id="1-today-widget的建立">1. Today Widget的建立</h3>
<blockquote>
<pre><code class="language-swift">//File &gt; New &gt; Target &gt; Applicaion Extension -&gt; Today Extension
//target &gt; capabilities &gt; App Group -&gt; open
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://raw.githubusercontent.com/Luolijie97/Pic_PicGo/master/img/image-20191122105321030.png" alt="" loading="lazy"></figure>
</blockquote>
<h3 id="2-userdefault的使用">2. UserDefault的使用</h3>
<blockquote>
<pre><code class="language-swift">//默认UserDefaults
let defaults = UserDefaults.standard
defaults.set(123, forKey: &quot;defaultKey&quot;)
defaults.integer(forKey: &quot;defaultKey&quot;)

//自定义UserDefaults
let userDefault = UserDefaults(suiteName: &quot;group.llj.watchDemo&quot;)
userDefault?.set(self.labelNumber, forKey: &quot;lefttime&quot;)
userDefault?.removeObject(forKey: &quot;lefttime&quot;)
</code></pre>
</blockquote>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://luolijie97.github.io/tag/2r_YYv3HN" class="tag">
                    Swift学习
                  </a>
                
              </div>
            
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
