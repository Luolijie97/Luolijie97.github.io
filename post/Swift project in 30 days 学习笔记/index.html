<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Swift project in 30 days å­¦ä¹ ç¬”è®° | lljçš„blog</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://luolijie97.github.io//favicon.ico?v=1579408577423">
<link rel="stylesheet" href="https://luolijie97.github.io//styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="day1: CustomFont


SnapKit ç¬¬ä¸‰æ–¹autolayoutè‡ªåŠ¨å¸ƒå±€åº“
let changeBtn = UIButton(type: .custom)
changeBtn.snp.makeConstraints { (m..." />
    <meta name="keywords" content="Swiftå­¦ä¹ " />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://luolijie97.github.io/">
        <img src="https://luolijie97.github.io//images/avatar.png?v=1579408577423" class="site-logo">
        <h1 class="site-title">lljçš„blog</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      llj's blog
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://luolijie97.github.io//atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Swift project in 30 days å­¦ä¹ ç¬”è®°</h2>
            <div class="post-date">2020-01-16</div>
            
            <div class="post-content" v-pre>
              <h2 id="day1-customfont">day1: CustomFont</h2>
<ul>
<li>
<p><strong><em>SnapKit</em></strong> ç¬¬ä¸‰æ–¹autolayoutè‡ªåŠ¨å¸ƒå±€åº“</p>
<pre><code class="language-swift">let changeBtn = UIButton(type: .custom)
changeBtn.snp.makeConstraints { (make) in
//            make.top.equalTo(500)
    make.top.equalTo(label.snp.bottom).offset(300)
    make.centerX.equalTo(self.view)
    make.width.equalTo(200)
  }
</code></pre>
</li>
<li>
<p>UIFont.familyNames</p>
</li>
<li>
<p>UIfont.fontNames</p>
<pre><code class="language-swift">let familyNames = UIFont.familyNames
for familyName in familyNames {
  print(&quot;+++++ \(familyName)&quot;)
  let fontNames = UIFont.fontNames(forFamilyName: familyName)
  for fontName in fontNames {
    print(&quot;---- \(fontName)&quot;)
  }
}
</code></pre>
</li>
</ul>
<h2 id="day2-watchs-demo">day2: Watch's Demo</h2>
<ul>
<li>
<p>SnapKit</p>
<pre><code class="language-swift">let resetButton = UIButton()
resetButton.snp.makeConstraints { (make) in
   make.top.equalTo(10)
   make.right.equalTo(-10)
   make.width.equalTo(100)
   make.height.equalTo(50)
}
</code></pre>
</li>
<li>
<p>Timerä½¿ç”¨</p>
</li>
<li>
<pre><code class="language-swift">var timer: Timer!
  @objc func startHander() {
      if self.timer != nil {
          self.stopHander()
      }
      self.timer = Timer.scheduledTimer(withTimeInterval: 0.1, repeats: true, block: { (Timer) in
          self.labelNumber += 0.1
          self.result.text = String(format: &quot;%.1f&quot;, self.labelNumber)
      })
      self.timer.fire()
      
  }

  @objc func stopHander() {
      guard let timerForDistory = self.timer else { return }
      timerForDistory.invalidate()
  }
  
  @objc func resetHander() {
      self.labelNumber = 0
      self.result.text = &quot;0&quot;
  }
</code></pre>
</li>
<li></li>
</ul>
<h2 id="day3-find-my-position">day3: Find My Position</h2>
<ul>
<li>
<p>æ¯›ç»ç’ƒæ•ˆæœ</p>
<ul>
<li>UIBlurEffect</li>
<li>UIVibrancyEffectï¼šæ”¾å¤§å’Œè°ƒæ•´ UIVisualEffectView è§†å›¾ä¸‹é¢çš„å†…å®¹çš„é¢œè‰²
<ul>
<li><code>//åˆ›å»ºå¹¶æ·»åŠ vibrancyè§†å›¾ let vibrancyEffect = UIVibrancyEffect(blurEffect: blurEffect)</code></li>
</ul>
</li>
<li>UIVisualEffectViewï¼šæ¨¡ç³Šè§†å›¾
<ul>
<li>//åˆ›å»ºä¸€ä¸ªæ‰¿è½½æ¨¡ç³Šæ•ˆæœçš„è§†å›¾<br>
let blurView = UIVisualEffectView(effect: blurEffect)</li>
</ul>
</li>
</ul>
<pre><code class="language-swift">        let blurEffect = UIBlurEffect(style: .light)
        let blurView = UIVisualEffectView(effect: blurEffect)
        blurView.frame = self.view.bounds
        self.view.addSubview(blurView)
</code></pre>
</li>
<li>
<p>è·å–å®šä½ï¼šCLLocationManger,CLLocationManagerDelegate</p>
<ul>
<li>
<pre><code class="language-swift">let locationManger = CLLocationManager()
let geocoder = CLGeocoder()

locationManger.delegate = self

let findMyLocationBtn = UIButton(type: .custom)
findMyLocationBtn.addTarget(self, action: #selector(findMyLocation), for: .touchUpInside)
self.view.addSubview(findMyLocationBtn)

//start find location
@objc func findMyLocation() {
  locationManger.requestAlwaysAuthorization()
  locationManger.startUpdatingLocation()
}
//CLLocationManagerDelegate
//Tells the delegate that new location data is available.
func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) {
  let locations: NSArray = locations as NSArray
  let currentLocation = locations.lastObject as! CLLocation
  let locationStr = &quot;lat:\(currentLocation.coordinate.latitude) lng:\(currentLocation.coordinate.longitude)&quot;

  locationLabel.text = locationStr
  reverseGeocode(location: currentLocation)
  locationManger.stopUpdatingLocation()
}
//å°†ç»çº¬åº¦è½¬æ¢ä¸ºåŸå¸‚å
func reverseGeocode(location: CLLocation) {
  geocoder.reverseGeocodeLocation(location) { (palceMark, error) in
     if (error == nil) {
         let tempArray = palceMark! as NSArray
         let mark = tempArray.firstObject as! CLPlacemark
         //now begins the reverse geocode
         let country = mark.country!
         let city = mark.locality!
         let street = mark.thoroughfare!

         let finalAddress = &quot;\(street),\(city),\(country)&quot;
         self.locationStrLabel.text = finalAddress

     }
  }
}
</code></pre>
</li>
<li></li>
</ul>
</li>
<li>
<p>ç¼©ç•¥å›¾: image literal, color literal</p>
</li>
</ul>
<h2 id="day4-limit-input-text-field">day4: Limit input Text Field</h2>
<ul>
<li>
<p>UINavigationControllerå’ŒUINavigationItemçš„ä½¿ç”¨</p>
<pre><code class="language-swift">let leftItem = UIBarButtonItem(title: &quot;close&quot;, style: .plain, target: self, action: nil)
self.navigationItem.leftBarButtonItem = leftItem
let rightItem = UIBarButtonItem(title: &quot;Tweet&quot;, style: .plain, target: self, action: nil)
rightItem.tintColor = .green
self.navigationItem.rightBarButtonItem = rightItem
self.window?.rootViewController = UINavigationController(rootViewController: ViewController())
</code></pre>
<ul>
<li><strong><code>ios13é»˜è®¤æ— UINavigationController</code></strong></li>
</ul>
</li>
<li>
<p>UITextViewDelegateä½¿ç”¨</p>
<ul>
<li>é€šè¿‡UITextViewçš„textViewDidChangeå§”æ‰˜äº‹ä»¶æ•æ‰å½“å‰è¾“å…¥å†…å®¹</li>
<li>extViewDidBeginEditing å¼€å§‹</li>
<li>textViewDidEndEditing ç»“æŸ</li>
</ul>
</li>
<li>
<p><strong><code>é€šè¿‡ç›‘å¬UIResponder.keyboardWillChangeFrameNotificationäº‹ä»¶æ¥ç›‘è§†Keyboardçš„å¼¹å‡ºå’Œæ”¶èµ·</code></strong></p>
<ul>
<li>
<p><strong>Notificationä¸­çš„userinfoæœ‰é”®ç›˜ç›¸å…³ä¿¡æ¯</strong></p>
</li>
<li>
<pre><code class="language-swift">//userinfoä¸­åŒ…å«keyboardç›¸å…³ä¿¡æ¯
//è·å¾—é”®ç›˜åŠ¨ç”»æ—¶é•¿: note.userInfo?[UIResponder.keyboardAnimationDurationUserInfoKey] 
let duration = note.userInfo?[UIResponder.keyboardAnimationDurationUserInfoKey] as! TimeInterval
//è·å¾—é”®ç›˜çš„endFrame: note.userInfo?[UIResponder.keyboardFrameEndUserInfoKey] 
let endFrame = (note.userInfo?[UIResponder.keyboardFrameEndUserInfoKey] as! NSValue).cgRectValue
</code></pre>
</li>
</ul>
</li>
<li>
<p>iosåŠ¨ç”»å®ç°ä¹‹UIView</p>
<ul>
<li>UIView.animate(withDuration:) {}</li>
</ul>
</li>
</ul>
<h2 id="day5-pull-to-refresh">day5: Pull To Refresh</h2>
<ul>
<li>
<p><strong>UIRefreshControl</strong> ä¸‹æ‹‰åˆ·æ–°æ§ä»¶ä½¿ç”¨</p>
<pre><code class="language-swift">let refresh = UIRefreshControll()
refresh.attributedTitle = .init(string:&quot;Pulling&quot;)
refresh.addTarget(self, action: #selector(pullTheRefresh), for: .valueChanged)

@objc func pullTheRefresh() {
  //...
  refresh.endRefreshing()
  //...
}
</code></pre>
</li>
<li>
<p>ä¸‹æ‹‰è§¦å‘äº‹ä»¶ï¼š <code>UIControl.Event.valueChanged</code></p>
</li>
<li>
<p>UITableViewç»„ä»¶çš„ä½¿ç”¨</p>
<ul>
<li><strong><code>delegate &amp; datasource</code></strong></li>
<li>separateor åˆ†å‰²çº¿</li>
</ul>
<pre><code class="language-swift">var table: UITableView!
table = UITableView(frame: self.view.bounds)
table.frame.origin.y = 44
table.separatorStyle = .singleLine
table.separatorColor = .black
self.view.addSubview(table)

table.delegate = self
table.dataSource = self
</code></pre>
</li>
<li>
<p><code>DateFormatter</code>æ—¥æœŸè½¬æ¢</p>
<ul>
<li>.dataFormat è½¬æ¢æ ¼å¼</li>
</ul>
<pre><code class="language-swift">let dateFormatter = DateFormatter()
dateFormatter.dateFormat = &quot;yyyyå¹´MMæœˆddæ—¥/HHæ—¶mmåˆ†ssç§’&quot;
let dateStr = dateFormatter.string(from: dataSource[indexPath.row])
</code></pre>
</li>
</ul>
<h2 id="day6-video-player">day6: Video Player</h2>
<ol>
<li>AVAudioPlayer éŸ³é¢‘æ’­æ”¾å™¨å®ä½“
<ul>
<li>AVAudioSession.shareInstance() éŸ³é¢‘ç›¸å…³è®¾ç½®</li>
</ul>
</li>
</ol>
<blockquote>
<pre><code class="language-swift">let audioPath = Bundle.main.path(forResource: &quot;live.mp3&quot;, ofType: nil)
let audioUrl = URL(fileURLWithPath: audioPath!)
//éŸ³é¢‘åˆå§‹åŒ–
do {
audioPlayer = try AVAudioPlayer(contentsOf: audioUrl)
print(&quot;audioplayer is not nil&quot;)
} catch {
audioPlayer = nil

print(&quot;error:\(error)&quot;)
}
do {
//æ¿€æ´»éŸ³é¢‘ä¼šè¯
try AVAudioSession.sharedInstance().setCategory(.playback)
try AVAudioSession.sharedInstance().setActive(true)
} catch {
print(&quot;error:\(error)&quot;)
}
</code></pre>
</blockquote>
<ol start="2">
<li>
<p>AVAudioPlayerDelegate éŸ³é¢‘æ’­æ”¾ç›¸å…³å§”æ‰˜</p>
</li>
<li>
<p>åå°æ’­æ”¾ç›¸å…³è®¾ç½®ï¼ˆplist, codeï¼‰</p>
</li>
</ol>
<blockquote>
<p><img src="https://raw.githubusercontent.com/Luolijie97/Pic_PicGo/master/img/image-20191110142700690.png" alt="" loading="lazy"><br>
<img src="https://raw.githubusercontent.com/Luolijie97/Pic_PicGo/master/img/image-20191110142743216.png" alt="" loading="lazy"></p>
</blockquote>
<ol>
<li>é”å±ç›¸å…³è®¾ç½®
<ul>
<li>MPNowPlayingInfoCenter.default().nowPlayingInfo é”å±ä¿¡æ¯</li>
<li>remoteControlReceived ä»£ç†æ–¹æ³•å®ç°</li>
</ul>
</li>
</ol>
<blockquote>
<pre><code class="language-swift">func initForLockScreen() {

let artWorkImage:UIImage = UIImage(named: &quot;thumb.jpg&quot;)!

MPNowPlayingInfoCenter.default().nowPlayingInfo = [
 MPMediaItemPropertyTitle:&quot;çš‡åå¤§é“ä¸œ&quot;,
 MPMediaItemPropertyArtist:&quot;ç½—å¤§ä½‘&quot;,
 MPMediaItemPropertyArtwork:MPMediaItemArtwork(boundsSize: artWorkImage.size, requestHandler: { (size) -&gt; UIImage in
                                                                                               return artWorkImage
                                                                                              }),
 MPNowPlayingInfoPropertyPlaybackRate:1.0,
 MPMediaItemPropertyPlaybackDuration:audioPlayer?.duration ?? 0,
 MPNowPlayingInfoPropertyElapsedPlaybackTime:audioPlayer?.currentTime ?? 0
]

if (audioPlayer?.isPlaying != nil) {
 MPNowPlayingInfoCenter.default().playbackState = .playing
} else {
 MPNowPlayingInfoCenter.default().playbackState = .paused
}

}

override func remoteControlReceived(with event: UIEvent?) {
switch event!.subtype {
 case .remoteControlPlay:
 audioPlayer?.play()
 case .remoteControlPause:
 audioPlayer?.pause()
 case .remoteControlStop:
 audioPlayer?.stop()
 default:
 break
}
}
</code></pre>
</blockquote>
<h2 id="day7-simple-photo-browser">day7: Simple Photo Browser</h2>
<ul>
<li>
<p>UIScrollViewä½¿ç”¨</p>
<ul>
<li>
<p>ä½¿ç”¨ç¼©æ”¾ï¼šè®¾ç½®**<code>maximumZoomScale</code><strong>å’Œ</strong><code>minimumZoomScale</code><strong>,å®ç°å§”æ‰˜æ–¹æ³•</strong><code>ViewForZooming</code>**</p>
<blockquote>
<pre><code class="language-swift">var scrollView:UIScrollView!
scrollView = UIScrollView(frame: self.view.frame)
scrollView.maximumZoomScale = 6.0
scrollView.minimumZoomScale = 1.0
scrollView.backgroundColor = .black
scrollView.contentSize = imageView.bounds.size
scrollView.delegate = self
self.view.addSubview(scrollView)

//MARK: - UIScrollViewDelegate
func viewForZooming(in scrollView: UIScrollView) -&gt; UIView? {
return imageView
}
</code></pre>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="day8-color-gradient">day8: Color Gradient</h2>
<ul>
<li>
<p>CAGradientLayer æ¸å˜å±‚çš„ä½¿ç”¨</p>
<ul>
<li><strong>frame</strong>,<strong>colors</strong>...</li>
<li><strong><code>self.view.layer.addsublayer()</code></strong></li>
<li>colors å¯ç”¨**[CGColor]**æ•°ç»„è¿›è¡Œèµ‹å€¼</li>
</ul>
<blockquote>
<pre><code class="language-swift">var grandientLayer:CAGradientLayer!
var colorSets = [[CGColor]]()
var currentColorSet:Int!
func createGradientLayer() {
grandientLayer = CAGradientLayer()
grandientLayer.frame = self.view.bounds
//set gradient color
grandientLayer.colors = colorSets[currentColorSet]
//å°†grandientLayerä½œä¸ºå­layeråŠ åˆ°ä¸»layerä¸Š
self.view.layer.addSublayer(grandientLayer)
}
</code></pre>
</blockquote>
</li>
<li>
<p>Gestureæ“ä½œä¹‹<strong>PanGestureRecognizer</strong>ï¼šâ€œæ»‘åŠ¨â€æ‰‹åŠ¿ï¼Œå¯ä»¥è¯†åˆ«æ‹–æ‹½æˆ–ç§»åŠ¨åŠ¨ä½œ</p>
<ul>
<li>
<p>åˆå§‹åŒ–UIPanGestureRecognizer</p>
<pre><code class="language-swift">let panGestureRecognizer = UIPanGestureRecognizer(target: self, action: #selector(handlePanGesture(sender:)))
</code></pre>
</li>
<li>
<p>å°†æ‰‹åŠ¿æ·»åŠ åˆ°è§†å›¾ä¸Š</p>
<pre><code class="language-swift">self.view.addGestureRecogizer(panGestureRecognizer)
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="day9-swipeable-cell">day9: Swipeable Cell</h2>
<ul>
<li>
<p>UItableViewä½¿ç”¨</p>
<ul>
<li>
<p>**<code>UIContextualAction</code>**çš„é—­åŒ…ç”¨æ³•</p>
<p><strong>https://www.jianshu.com/p/847deff29f24</strong></p>
<p><strong>https://www.jianshu.com/p/14d778afeefc</strong></p>
</li>
</ul>
<pre><code class="language-swift">//MARK: - UITableViewDataSource
func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int
{
  //è¿”å›æ¯ä¸ªsectionä¸­çš„è¡Œæ•°
}
//Asks the data source for a cell to insert in a particular location of the table view.
func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {
  // cellçš„åˆå§‹åŒ–ä¸å¤ç”¨ï¼Œè¿”å›cell
}

//MARK: - UITableViewDelegate
//ä»å°¾éƒ¨å¼€å§‹å‘å·¦æ»‘åŠ¨cell
func tableView(_ tableView: UITableView, trailingSwipeActionsConfigurationForRowAt indexPath: IndexPath) -&gt; UISwipeActionsConfiguration? {
  //Returns the swipe actions to display on the trailing edge of the row.
  let likeAction = UIContextualAction(style: .normal, title: &quot;ğŸ‘&quot;) { (action, view, finished) in
            self.actionController.message = &quot;Thanks for your Love ğŸ˜¸&quot;
            self.showAlertController()
            finished(true)
        }
        likeAction.backgroundColor = .white
        
        let disLikeAction = UIContextualAction(style: .normal, title: &quot;ğŸ‘&quot;) { (action, view, finished) in
            self.actionController.message = &quot;Tell me Why!!!ğŸ˜¤&quot;
            self.showAlertController()
            finished(true)
        }
        disLikeAction.backgroundColor = .white
        
        let unknowAction = UIContextualAction(style: .destructive, title: &quot;ğŸ––&quot;) { (action, view, finished) in
            self.actionController.message = &quot;What do you mean? ğŸ¤”&quot;
            self.showAlertController()
            finished(true)
        }
        unknowAction.backgroundColor = .white
        //actionä»å³å‘å·¦çš„é¡ºåºæ·»åŠ 
        return .init(actions: [likeAction, disLikeAction , unknowAction])
}
</code></pre>
</li>
<li>
<p>**<code>UIAlertController</code>**çš„ä½¿ç”¨</p>
<pre><code class="language-swift">private var actionController: UIAlertController!
//init alertController
actionController = UIAlertController(title: &quot;alert&quot;, message: &quot;&quot;, preferredStyle: .alert)
//...
self.actionController.message = &quot;123&quot;
present(actionController, animated: true) {
  let dismissTimer = Timer.sheduledTimer(withTimeInterval: 2.0, repeats: false) {
    (timer) in 
    	self.actionController.dismiss(animate: true, completion: nil)
  }
  RunLoop.main.add(dismissTimer, forMode: .comoon)
}

</code></pre>
</li>
<li>
<p><strong><code>UIViewåŠ¨ç”»ä½¿ç”¨</code></strong></p>
<pre><code class="language-swift">//cellçš„æ˜¾ç¤ºåŠ¨ç”»
let cells = tableView.visibleCells
let tableHeight:CGFloat = tableView.bounds.size.height
for (index, cell) in cells.enumerated() {
  cell.frame.origin.y = tableHeight
  UIView.animate(withDuration: 1.0, delay: 0.04 * Double(index), usingSpringWithDamping: 0.8, initialSpringVelocity: 0, options: [], animations: {
    cell.frame.origin.y = 0
  }, completion: nil)
}
</code></pre>
</li>
</ul>
<h2 id="day10-stretchy-header">day10 Stretchy Header</h2>
<ul>
<li>
<p>UIScrollViewDelegateä½¿ç”¨</p>
<pre><code class="language-swift">//MARK: - UIScrollViewDelegate
func scrollViewDidScroll(_ scrollView: UIScrollView) {
  let offsetY = scrollView.contentOffset.y
  let maxOffsetY = tableView.frame.height
  let validateOffsetY = -offsetY / maxOffsetY
  let scaleFactor = 1 + validateOffsetY
  bannerImgView.transform = CGAffineTransform(scaleX: scaleFactor, y: scaleFactor)

}
</code></pre>
</li>
</ul>
<h2 id="day11-gradienttableview">day11 GradientTableView</h2>
<ul>
<li>
<p>UITableViewçš„æ¸å˜å±‚</p>
<pre><code class="language-swift">func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {
  let cell = UITableViewCell(style: .default, reuseIdentifier: &quot;reuseId&quot;)
  cell.textLabel?.text = self.dataSource[indexPath.row]
  cell.textLabel?.textColor = .white
  cell.selectionStyle = .none

  //cell -&gt; bgView -&gt; gradientLayer, move bgView back to the cell
  let bgview = UIView(frame: CGRect(x: 0, y: 0, width: self.view.frame.width, height: self.cellHeight))
  let gradientLayer = CAGradientLayer()
  gradientLayer.frame = bgview.frame

  let lowerColor:CGColor = UIColor(red: 1.0, green: (CGFloat(indexPath.row * 2) * self.colorRatio)/255.0, blue: (CGFloat(indexPath.row * 2) * self.colorRatio)/255.0, alpha: 1).cgColor
  let upperColor:CGColor = UIColor(red: 1.0, green: (CGFloat(indexPath.row * 2) * self.colorRatio + self.colorRatio)/255.0, blue: (CGFloat(indexPath.row * 2) * self.colorRatio + self.colorRatio)/255.0, alpha: 1).cgColor

  gradientLayer.colors = [lowerColor, upperColor]
  bgview.layer.addSublayer(gradientLayer)
  cell.insertSubview(bgview, belowSubview: cell.contentView)

  /* equal to below
  cell.addSubview(bgview)
  cell.sendSubviewToBack(bgview)
  */

  return cell
}
</code></pre>
</li>
</ul>
<h2 id="day12-emoji-slot-machine">day12 Emoji Slot Machine</h2>
<ul>
<li>
<p><strong>UIPickerView</strong>çš„ä½¿ç”¨</p>
<ul>
<li>åˆå§‹åŒ–</li>
</ul>
<blockquote>
<pre><code class="language-swift">slotMachine = UIPickerView(frame: CGRect(x: 0, y: 0, width: self.view.frame.width, height: 220))
self.view.addSubview(slotMachine)
slotMachine.dataSource = self
slotMachine.delegate = self
slotMachine.center.x = self.view.center.x
slotMachine.center.y = self.view.center.y - 50

slotMachine.selectRow(Int(arc4random())%(emojiArray.count), inComponent: 0, animated: false)
slotMachine.selectRow(Int(arc4random())%(emojiArray.count), inComponent: 1, animated: false)
slotMachine.selectRow(Int(arc4random())%(emojiArray.count), inComponent: 2, animated: false)
</code></pre>
</blockquote>
<ul>
<li>
<p><strong>UIPickerViewDataSource</strong>ç›¸å…³</p>
<blockquote>
<pre><code class="language-swift">func numberOfComponents(in pickerView: UIPickerView) -&gt; Int {
return 3
}

func pickerView(_ pickerView: UIPickerView, numberOfRowsInComponent component: Int) -&gt; Int {
return emojiArray.count
}
</code></pre>
</blockquote>
</li>
<li>
<p><strong>UIPickerViewDelegate</strong>ç›¸å…³</p>
<blockquote>
<pre><code class="language-swift">func pickerView(_ pickerView: UIPickerView, rowHeightForComponent component: Int) -&gt; CGFloat {
return 90
}

func pickerView(_ pickerView: UIPickerView, viewForRow row: Int, forComponent component: Int, reusing view: UIView?) -&gt; UIView {
let pickerLabel = UILabel()
pickerLabel.text = emojiArray[row]
pickerLabel.textAlignment = .center
pickerLabel.font = .systemFont(ofSize: 60)
return pickerLabel
}
</code></pre>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="day13-loginanimation">day13 LoginAnimation</h2>
<ul>
<li>
<p>UINavigationControllerçš„ä½¿ç”¨</p>
<pre><code class="language-swift">//Pushes a view controller onto the receiverâ€™s stack and updates the display.
let loginVC = LoginViewController()
self.navigationController?.pushViewController(loginVC, animated: false)

//Pops the top view controller from the navigation stack and updates the display.
self.navigationController?.popViewController(animated: true)
</code></pre>
</li>
<li>
<p>UIView.animateåŠ¨ç”»æ•ˆæœ</p>
<pre><code class="language-swift">//åˆå§‹çŠ¶æ€
self.view.alpha = 0
let userNameInputField = UITextField(frame: CGRect(x: -270, y: 50, width: 270, height: 40))
let pswInputField = UITextField(frame: CGRect(x: -270, y: 100, width: 270, height: 40))
let loginButton = UIButton(frame: CGRect(x: -125, y: 160, width: 125, height: 40))
//åŠ¨ç”»æ•ˆæœ
UIView.animate(withDuration: 0.5) {
  self.view.alpha = 1
}

UIView.animate(withDuration: 0.5, delay: 0.6, usingSpringWithDamping: 0.9, initialSpringVelocity: 2, options: .allowAnimatedContent, animations: {
  userNameInputField.center.x = self.view.center.x
}, completion: nil)

UIView.animate(withDuration: 0.5, delay: 0.8, usingSpringWithDamping: 0.9, initialSpringVelocity: 2, options: .allowAnimatedContent, animations: {
  pswInputField.center.x = self.view.center.x
}, completion: nil)

UIView.animate(withDuration: 0.5, delay: 1, options: .curveEaseIn,animations: {
  loginButton.center.x = self.view.center.x
}) { (isComplete) in
    // usingSpringWithDamping: 0-1, the less the more exaggerate
    // initialSpringVelocity: the bigger the faster init speed
    UIView.animate(withDuration: 1, delay: 0.5, usingSpringWithDamping: 0.1, initialSpringVelocity: 2, options:.allowAnimatedContent, animations: {
      loginButton.frame.size.width = 180
      loginButton.center.x = self.view.center.x
    }, completion: nil)
   }
</code></pre>
</li>
</ul>
<h2 id="day14-spotlight-search">day14 Spotlight Search</h2>
<ol>
<li>
<p>CSSearchableItemAttributeSetä½¿ç”¨</p>
<pre><code class="language-swift">//Spotlight æœç´¢é…ç½®
let attributSet = CSSearchableItemAttributeSet(itemContentType: &quot;test&quot;)
attributSet.title = itemDic[&quot;name&quot;] as? String
attributSet.contentDescription = itemDic[&quot;description&quot;] as? String
let imageData = (itemDic[&quot;cover&quot;] as? UIImage)!.jpegData(compressionQuality: 0.7)
attributSet.thumbnailData = imageData

let searchItem = CSSearchableItem(uniqueIdentifier: &quot;\(indexPath.row)&quot;, domainIdentifier: &quot;nimomeng&quot;, attributeSet: attributSet)
let tempItems = [searchItem]
CSSearchableIndex.default().indexSearchableItems(tempItems) { (error) in
                                                            }

//AppDelegate.swift
public let notificationName = NSNotification.Name.init(&quot;receivedIdFromSpotlightSearch&quot;)

//ï¼Ÿï¼Ÿæµ‹è¯•ä¸è°ƒç”¨
//åº”ç”¨ç¨‹åºåœ¨æ”¶åˆ°ä¸ç”¨æˆ·æ´»åŠ¨ç›¸å…³çš„æ•°æ®æ—¶è°ƒç”¨æ­¤æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·ä½¿ç”¨â€œè¶ŠåŒºåˆ‡æ¢â€ä»å…¶ä»–è®¾å¤‡è½¬ç§»æ´»åŠ¨æ—¶ã€‚
func application(_ application: UIApplication, continue userActivity: NSUserActivity, restorationHandler: @escaping ([UIUserActivityRestoring]?) -&gt; Void) -&gt; Bool {

  if userActivity.activityType == CSSearchableItemActionType {
    if let identifier = userActivity.userInfo?[CSSearchableItemActivityIdentifier] as? String {
      NotificationCenter.default.post(name: notificationName, object: self, userInfo: [&quot;id&quot;: identifier])
    }
  }
  return true
}

//ViewController.swift 
 @objc func receivedNotification(sender: Notification) {
        let userInfo = sender.userInfo
        let index = Int(userInfo?[&quot;id&quot;] as! String)
        let itemDic = dataSource[index!]
        let detailVC = DetailViewController.init(with: itemDic)
        
        self.navigationController?.pushViewController(detailVC, animated: true)
    
    }
</code></pre>
</li>
</ol>
<h2 id="day15-today-widget">day15 Today Widget</h2>
<h3 id="1-today-widgetçš„å»ºç«‹">1. Today Widgetçš„å»ºç«‹</h3>
<blockquote>
<pre><code class="language-swift">//File &gt; New &gt; Target &gt; Applicaion Extension -&gt; Today Extension
//target &gt; capabilities &gt; App Group -&gt; open
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://raw.githubusercontent.com/Luolijie97/Pic_PicGo/master/img/image-20191122105321030.png" alt="" loading="lazy"></figure>
</blockquote>
<h3 id="2-userdefaultçš„ä½¿ç”¨">2. UserDefaultçš„ä½¿ç”¨</h3>
<blockquote>
<pre><code class="language-swift">//é»˜è®¤UserDefaults
let defaults = UserDefaults.standard
defaults.set(123, forKey: &quot;defaultKey&quot;)
defaults.integer(forKey: &quot;defaultKey&quot;)

//è‡ªå®šä¹‰UserDefaults
let userDefault = UserDefaults(suiteName: &quot;group.llj.watchDemo&quot;)
userDefault?.set(self.labelNumber, forKey: &quot;lefttime&quot;)
userDefault?.removeObject(forKey: &quot;lefttime&quot;)
</code></pre>
</blockquote>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://luolijie97.github.io/tag/2r_YYv3HN" class="tag">
                    Swiftå­¦ä¹ 
                  </a>
                
              </div>
            
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
